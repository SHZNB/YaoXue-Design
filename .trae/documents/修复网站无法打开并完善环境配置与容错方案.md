## 问题判断
- 首页白屏的最可能原因是 Supabase 环境变量缺失导致前端在模块加载阶段直接抛错：见 [supabase.ts](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/src/lib/supabase.ts#L6-L8)。
- 路由与部署配置基本正常：Vercel 已做 SPA 回退到 [vercel.json](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/vercel.json#L8-L10) 的 index.html；React 路由在 [App.tsx](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/src/App.tsx) 使用 BrowserRouter。

## 修改方案（代码层）
- 调整 Supabase 初始化为“非致命”：
  - 在 [supabase.ts](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/src/lib/supabase.ts) 移除顶层 throw，导出 hasSupabaseEnv 标志；当变量缺失时导出 `supabase=null`。
- 增加全局配置守卫：
  - 在 [App.tsx](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/src/App.tsx) 引入 EnvGuard（新组件），若 `!hasSupabaseEnv` 则渲染“配置缺失提示页”，避免白屏。
- 使用守卫避免空调用：
  - 在 [authStore.ts](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/src/store/authStore.ts) 和 [Auth.tsx](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/src/pages/Auth.tsx) 引入 `hasSupabaseEnv` 检查；缺失时显示友好文案并禁用登录/注册交互。
- 可选增强：为错误页添加“如何配置”快速指南与返回首页按钮。

## 部署与环境配置（Vercel）
- 在 Vercel 项目 Settings → Environment Variables 添加：
  - `VITE_SUPABASE_URL`（来自 Supabase 项目）、`VITE_SUPABASE_ANON_KEY`（匿名 key）。
  - 环境选择 Production（也可同时配 Preview）。
- 如使用后端 API，建议设置 `ALLOWED_ORIGINS` 包含生产域名，减少跨域日志噪音（当前为空时默认放行）。
- 触发重新部署，验证构建日志无环境变量缺失警告。

## 验证步骤
- 本地：构建后打开 [dist/index.html](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/dist/index.html)，确认页面正常渲染；在无 env 情况下应显示配置提示页而非白屏。
- 线上：访问首页与 [/auth](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/src/pages/Auth.tsx)，检查浏览器控制台无运行时错误；执行一次注册/登录流以确认正常。

## 文档与交付
- 在 [authentication_system.md](file:///e:/AAA%20My%20New%20Project/Trying%20to%20make%20a%20YaoXue%20Design/docs/authentication_system.md) 增补“部署环境变量与常见故障”章节：列出必需变量、Vercel 配置入口与故障排查清单。
- 提交修改记录并备注：消除了 env 缺失导致的白屏硬错误，提升线上可观测性与用户可用性。

如确认本方案，立即实施代码修改、配置环境变量并进行验证。