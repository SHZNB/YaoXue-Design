## 需求分析与现状
根据您的要求，需完整实现后台管理视图与多人协同实验模块，重点补齐以下缺失功能：
1.  **教师端预设管理**: 当前无入口，需新增页面允许教师配置实验参数。
2.  **过程评分**: 仅有基础分数段，需实现基于操作步骤的自动评分逻辑。
3.  **报告生成**: 当前空白，需实现实验数据导出为可视化报告。
4.  **多人协同**: 当前无实现，需基于 Supabase Realtime 搭建状态同步。
5.  **更多实验模板**: 需扩充数据库中的实验内容。

## 实施计划

### 1. 教师端功能增强 (Teacher Portal)
*   **实验预设管理**: 新增 `src/pages/teacher/ExperimentPresets.tsx`，允许教师为特定实验设置初始参数（如重力加速度、光源强度等），存入 `experiment_presets` 表（需新建）。
*   **过程监控**: 在教师端添加实时监控面板，通过 Supabase Realtime 订阅学生实验状态。

### 2. 实验核心模块 (Lab Core)
*   **评分系统**: 开发 `GradingSystem` 组件，基于“关键步骤检查点”机制。实验中触发关键动作（如“连接电路”、“添加试剂”）时记录日志并自动计分。
*   **报告生成**: 使用 `jspdf` 和 `html2canvas` 实现前端报告生成。将实验截图、得分详情、操作日志打包为 PDF。
*   **多人协同**: 封装 `useCollaboration` Hook，利用 Supabase Realtime 的 Broadcast 功能同步实验场景中的物体位置与状态。

### 3. 后台管理视图 (Admin Dashboard)
*   **管理骨架**: 创建 `src/pages/admin/Dashboard.tsx`，复用 `MainLayout` 但增加管理员侧边栏。
*   **功能模块**: 包含用户管理（查看/冻结）、审计日志查看（读取 `audit_logs`）、实验内容管理（CRUD `experiments` 表）。

### 4. 数据与模板扩充
*   **SQL 迁移**:
    *   创建 `experiment_presets` 表。
    *   创建 `experiment_logs` 表（用于评分与报告）。
    *   插入更多物理/化学实验模板数据（如“凸透镜成像”、“酸碱中和滴定”）。

## 交付物
*   教师端预设管理页面与路由。
*   支持多人位置同步的协同 Hook。
*   可导出 PDF 的实验报告生成器。
*   包含审计日志查看功能的管理员仪表盘。
*   新增的数据库表结构与预设数据。

## 执行顺序
1.  数据库迁移（表结构变更）。
2.  教师端预设管理实现。
3.  评分与报告生成模块开发。
4.  多人协同基础架构搭建。
5.  管理员仪表盘实现。